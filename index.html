<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>My Web OS</title>
    <style>
        * { box-sizing: border-box; font-family: 'Segoe UI', sans-serif; }
        body, html { margin: 0; padding: 0; overflow: hidden; }

        /* The Desktop Area */
        #desktop {
            width: 100vw; height: 100vh;
            background: linear-gradient(135px, #1e3a8a, #3b82f6);
            position: relative;
        }

        /* Desktop Icons */
        .icon {
            width: 80px; padding: 15px; text-align: center;
            color: white; cursor: pointer; border-radius: 5px;
        }
        .icon:hover { background: rgba(255,255,255,0.1); }
        .icon-img { font-size: 40px; margin-bottom: 5px; }

        /* Window Styling */
        .window {
            position: absolute; width: 450px; height: 300px;
            background: white; border: 1px solid #777;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            display: none; flex-direction: column;
            border-radius: 6px; overflow: hidden;
        }
        .window-header {
            background: #f3f3f3; padding: 10px; cursor: move;
            display: flex; justify-content: space-between; align-items: center;
            border-bottom: 1px solid #ddd; font-weight: bold;
        }
        .close-btn { 
            background: #ff5f56; border: none; color: white; 
            border-radius: 50%; width: 20px; height: 20px; cursor: pointer;
        }
        .content { flex-grow: 1; padding: 0; }
        textarea { width: 100%; height: 100%; border: none; padding: 10px; outline: none; resize: none; }

        /* Taskbar */
        #taskbar {
            position: absolute; bottom: 0; width: 100%; height: 45px;
            background: rgba(0, 0, 0, 0.85); backdrop-filter: blur(5px);
            display: flex; align-items: center; padding: 0 10px; z-index: 1000;
        }
        #start-btn {
            background: #0078d4; border: none; color: white;
            padding: 5px 15px; border-radius: 4px; cursor: pointer;
        }

        /* Start Menu */
        #start-menu {
            position: absolute; bottom: 50px; left: 10px; width: 200px;
            background: #222; color: white; border-radius: 5px;
            display: none; padding: 10px; z-index: 1001;
        }
        .menu-item { padding: 8px; cursor: pointer; border-radius: 3px; }
        .menu-item:hover { background: #444; }
    </style>
</head>
<body>

<div id="desktop">
    <!-- Icon to Open App -->
    <div class="icon" onclick="toggleWindow('notepad')">
        <div class="icon-img">üìù</div>
        <div>Notepad</div>
    </div>

    <!-- Notepad Window -->
    <div id="notepad" class="window" style="top: 100px; left: 100px;">
        <div class="window-header">
            <span>Notepad</span>
            <button class="close-btn" onclick="toggleWindow('notepad')">x</button>
        </div>
        <div class="content">
            <textarea id="note-data" placeholder="Type and I'll save it automatically..."></textarea>
        </div>
    </div>

    <!-- Start Menu -->
    <div id="start-menu">
        <div class="menu-item" onclick="alert('System Version 1.0')">About OS</div>
        <div class="menu-item" onclick="location.reload()">Restart</div>
    </div>

    <!-- Taskbar -->
    <div id="taskbar">
        <button id="start-btn" onclick="toggleStartMenu()">Start</button>
    </div>
</div>

<script>
    // 1. App Management
    function toggleWindow(id) {
        const win = document.getElementById(id);
        win.style.display = (win.style.display === 'flex') ? 'none' : 'flex';
    }

    function toggleStartMenu() {
        const menu = document.getElementById('start-menu');
        menu.style.display = (menu.style.display === 'block') ? 'none' : 'block';
    }

    // 2. Dragging Logic
    let activeWin = null;
    let offsetX, offsetY;

    document.addEventListener('mousedown', (e) => {
        if (e.target.closest('.window-header')) {
            activeWin = e.target.closest('.window');
            offsetX = e.clientX - activeWin.offsetLeft;
            offsetY = e.clientY - activeWin.offsetTop;
            activeWin.style.zIndex = 999; // Bring to front
        }
    });

    document.addEventListener('mousemove', (e) => {
        if (activeWin) {
            activeWin.style.left = (e.clientX - offsetX) + 'px';
            activeWin.style.top = (e.clientY - offsetY) + 'px';
        }
    });

    document.addEventListener('mouseup', () => { activeWin = null; });

    // 3. Virtual File System (LocalStorage)
    const noteArea = document.getElementById('note-data');
    
    // Load saved data on startup
    noteArea.value = localStorage.getItem('os_notepad_save') || "";

    // Save on every keystroke
    noteArea.addEventListener('input', () => {
        localStorage.setItem('os_notepad_save', noteArea.value);
    });
</script>

</body>
</html>
