<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Chromebook Private OS</title>
    <script src="https://unpkg.com"></script>
    <style>
        * { box-sizing: border-box; font-family: 'Segoe UI', sans-serif; }
        body, html { margin: 0; padding: 0; height: 100vh; overflow: hidden; background: #0f172a; }
        #login-screen { position: fixed; inset: 0; background: #1e293b; z-index: 9999; display: flex; align-items: center; justify-content: center; color: white; flex-direction: column; }
        #desktop { width: 100%; height: 100%; position: relative; background: url('https://images.unsplash.com') center/cover; display: none; }
        
        .icon-grid { display: grid; grid-template-columns: repeat(auto-fill, 90px); gap: 20px; padding: 20px; }
        .icon { text-align: center; color: white; cursor: pointer; padding: 10px; border-radius: 8px; text-shadow: 1px 1px 2px black; }
        .window { position: absolute; background: white; border: 1px solid #444; box-shadow: 0 10px 30px rgba(0,0,0,0.5); display: none; flex-direction: column; border-radius: 8px; overflow: hidden; min-width: 300px; z-index: 10; }
        .header { background: #334155; color: white; padding: 10px; cursor: move; display: flex; justify-content: space-between; }
        .content { flex-grow: 1; overflow: auto; padding: 10px; background: #f8fafc; }
        #taskbar { position: absolute; bottom: 0; width: 100%; height: 45px; background: rgba(0,0,0,0.9); display: flex; align-items: center; padding: 0 15px; }
        canvas { border: 1px solid #ccc; background: white; cursor: crosshair; }
    </style>
</head>
<body>

<div id="login-screen">
    <h2>System Login</h2>
    <input type="password" id="pass-input" placeholder="Password (default: 1234)">
    <button onclick="checkLogin()" style="margin-top:10px; padding: 10px 20px;">Unlock</button>
</div>

<div id="desktop">
    <div class="icon-grid">
        <div class="icon" onclick="openApp('music-app')">üéµ<br>Music</div>
        <div class="icon" onclick="openApp('paint-app')">üé®<br>Paint</div>
        <div class="icon" onclick="openApp('settings-app')">‚öôÔ∏è<br>Settings</div>
        <div class="icon" onclick="openApp('game-app')">üéÆ<br>Flash</div>
    </div>

    <!-- Music Player -->
    <div id="music-app" class="window" style="width:300px; top:50px; left:50px;">
        <div class="header"><span>Music</span><button onclick="closeApp('music-app')">x</button></div>
        <div class="content">
            <input type="file" accept="audio/*" onchange="loadMusic(this)">
            <audio id="os-player" controls style="width:100%; margin-top:10px;"></audio>
        </div>
    </div>

    <!-- Paint App -->
    <div id="paint-app" class="window" style="width:450px; top:100px; left:400px;">
        <div class="header"><span>Paint</span><button onclick="closeApp('paint-app')">x</button></div>
        <div class="content">
            <canvas id="paint-canvas" width="400" height="300"></canvas><br>
            <button onclick="clearCanvas()">Clear</button>
            <input type="color" id="paint-color" value="#000000">
        </div>
    </div>

    <!-- Settings App -->
    <div id="settings-app" class="window" style="width:300px; top:200px; left:150px;">
        <div class="header"><span>Settings</span><button onclick="closeApp('settings-app')">x</button></div>
        <div class="content">
            <p>Wallpaper URL:</p>
            <input type="text" id="wall-url" style="width:100%" placeholder="Paste image URL here">
            <button onclick="applySettings()" style="margin-top:5px">Apply</button>
            <hr>
            <p>Change Password:</p>
            <input type="password" id="new-pass" style="width:100%">
        </div>
    </div>

    <!-- Flash Player -->
    <div id="game-app" class="window" style="width:600px; height:450px; top:150px; left:300px;">
        <div class="header"><span>Ruffle Game</span><button onclick="closeApp('game-app')">x</button></div>
        <div class="content" id="ruffle-container"></div>
    </div>

    <div id="taskbar">
        <button onclick="exportOS()" style="background:#10b981; color:white; border:none; padding:8px 12px; border-radius:4px; cursor:pointer;">üíæ Export OS to Drive</button>
    </div>
</div>

<script>
    // Login Logic
    function checkLogin() {
        const savedPass = localStorage.getItem('os_pass') || '1234';
        if(document.getElementById('pass-input').value === savedPass) {
            document.getElementById('login-screen').style.display = 'none';
            document.getElementById('desktop').style.display = 'block';
        } else { alert("Wrong Password!"); }
    }

    // Paint Logic
    const canvas = document.getElementById('paint-canvas');
    const ctx = canvas.getContext('2d');
    let drawing = false;
    canvas.onmousedown = () => drawing = true;
    canvas.onmouseup = () => { drawing = false; ctx.beginPath(); };
    canvas.onmousemove = (e) => {
        if(!drawing) return;
        ctx.lineWidth = 5; ctx.lineCap = 'round';
        ctx.strokeStyle = document.getElementById('paint-color').value;
        ctx.lineTo(e.offsetX, e.offsetY); ctx.stroke();
    };
    function clearCanvas() { ctx.clearRect(0, 0, canvas.width, canvas.height); }

    // Settings Logic
    function applySettings() {
        const url = document.getElementById('wall-url').value;
        const pass = document.getElementById('new-pass').value;
        if(url) {
            document.getElementById('desktop').style.backgroundImage = `url('${url}')`;
            localStorage.setItem('os_wall', url);
        }
        if(pass) localStorage.setItem('os_pass', pass);
    }

    // Music Logic
    function loadMusic(input) {
        const file = input.files[0];
        document.getElementById('os-player').src = URL.createObjectURL(file);
    }

    // Export Logic
    function exportOS() {
        const state = JSON.stringify(localStorage);
        const blob = new Blob([`<script>const d=${state}; Object.keys(d).forEach(k=>localStorage.setItem(k,d[k]));<\/script>` + document.documentElement.outerHTML], {type: 'text/html'});
        const a = document.createElement('a'); a.href = URL.createObjectURL(blob); a.download = "My_Private_OS.html"; a.click();
    }

    // Global Functions
    function openApp(id) { document.getElementById(id).style.display = 'flex'; }
    function closeApp(id) { document.getElementById(id).style.display = 'none'; }
    
    window.onload = () => {
        const wall = localStorage.getItem('os_wall');
        if(wall) document.getElementById('desktop').style.backgroundImage = `url('${wall}')`;
    };

    // Drag Logic
    let active = null; let ox, oy;
    document.addEventListener('mousedown', e => {
        if(e.target.closest('.header')) {
            active = e.target.closest('.window');
            ox = e.clientX - active.offsetLeft; oy = e.clientY - active.offsetTop;
            active.style.zIndex = 1000;
        }
    });
    document.addEventListener('mousemove', e => { if(active) { active.style.left = (e.clientX-ox)+'px'; active.style.top = (e.clientY-oy)+'px'; } });
    document.addEventListener('mouseup', () => active = null);
</script>
</body>
</html>


